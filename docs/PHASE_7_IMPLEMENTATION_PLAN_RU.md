# –§–∞–∑–∞ 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OAuth ‚Äî –î–µ—Ç–∞–ª—å–Ω—ã–π –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P3 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞ - –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)
**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 3 –¥–Ω—è
**–°—Ç–∞—Ç—É—Å:** ‚è≥ **–ù–ï –ù–ê–ß–ê–¢–ê** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-18

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –§–∞–∑—ã 0-6 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω—ã

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Ñ–∞–∑—ã](#-–æ–±–∑–æ—Ä-—Ñ–∞–∑—ã)
2. [–¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏](#-—Ü–µ–ª–∏-–∏-–∑–∞–¥–∞—á–∏)
3. [–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
4. [–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç](#-–¥–µ—Ç–∞–ª—å–Ω—ã–π-–ø–ª–∞–Ω-—Ä–∞–±–æ—Ç)
5. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
6. [–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞](#-–∫—Ä–∏—Ç–µ—Ä–∏–∏-—É—Å–ø–µ—Ö–∞)
7. [–ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞](#-–ø–ª–∞–Ω-–æ—Ç–∫–∞—Ç–∞)
8. [–†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è](#-—Ä–∏—Å–∫–∏-–∏-–º–∏—Ç–∏–≥–∞—Ü–∏—è)

---

## üéØ –û–±–∑–æ—Ä —Ñ–∞–∑—ã

### –ß—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —ç—Ç–∞ —Ñ–∞–∑–∞?

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–î–µ–º–æ-—Ä–µ–∂–∏–º, –§–∞–∑—ã 0-6):**

- ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω (5000 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—Å—Ç–∞—Ç–∫–µ <10%
- ‚úÖ –ó–∞–ø—Ä–æ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–†–µ–∂–∏–º OAuth (–§–∞–∑–∞ 7):**

- üÜï –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ GitHub –∞–∫–∫–∞—É–Ω—Ç
- üÜï –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (5000 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- üÜï –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- üÜï –ë—É–¥—É—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

### –ü–æ—á–µ–º—É —ç—Ç–∞ —Ñ–∞–∑–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞?

**–î–µ–º–æ-—Ä–µ–∂–∏–º –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è:**

- –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞
- –ú–∞–ª–æ–π –∏ —Å—Ä–µ–¥–Ω–µ–π –±–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (<100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- –ê–Ω–∞–ª–∏–∑–∞ —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –ë—ã—Å—Ç—Ä–æ–≥–æ –≤—ã—Ö–æ–¥–∞ –Ω–∞ —Ä—ã–Ω–æ–∫

**OAuth —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –∫–æ–≥–¥–∞:**

- –õ–∏–º–∏—Ç –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞ —á–∞—Å—Ç–æ –∏—Å—á–µ—Ä–ø—ã–≤–∞–µ—Ç—Å—è
- –ë–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞—Å—Ç—ë—Ç —Å–≤–µ—Ä—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –æ–±—â–µ–≥–æ –ª–∏–º–∏—Ç–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º

---

## üéØ –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏

1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –¥–∞—Ç—å –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OAuth –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
4. **UX** ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ—Å—à–æ–≤–Ω—ã–π –æ–ø—ã—Ç "–ø–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º"

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub OAuth App
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã OAuth
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ —Å Vercel KV
- [ ] –û–±–Ω–æ–≤–∏—Ç—å UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- [ ] –û–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (CSRF, httpOnly cookies)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è OAuth flow
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üîÑ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### "–ü–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º" (Try Before You Auth)

**–ü—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–π—Ç (–≤—Ö–æ–¥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
   ‚Üì
2. –ò—â–µ—Ç GitHub –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ
   ‚Üì
3. –í–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É (Activity, Impact, Quality, Growth)
   ‚Üì
4. –ü—Ä–∏ –æ—Å—Ç–∞—Ç–∫–µ <10% –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ª–∏–º–∏—Ç–µ
   ‚Üì
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∞–µ—Ç: –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –¥–µ–º–æ –ò–õ–ò –≤–æ–π—Ç–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞
   ‚Üì
6. –í—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ GitHub OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚Üì
7. –ü–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç + –±—É–¥—É—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:**

- ‚úÖ –ù–∏–∑–∫–∏–π –±–∞—Ä—å–µ—Ä –≤—Ö–æ–¥–∞ (–Ω–µ—Ç —Å—Ç–µ–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è –æ—Ç–∫–∞–∑–æ–≤

---

## üìù –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç

### –î–µ–Ω—å 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ Backend (8 —á–∞—Å–æ–≤)

#### –≠—Ç–∞–ø 1.1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub OAuth App (1 —á–∞—Å)

**–î–µ–π—Å—Ç–≤–∏—è:**

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ [GitHub Settings ‚Üí Developer Settings ‚Üí OAuth Apps](https://github.com/settings/developers)
2. –ù–∞–∂–∞—Ç—å **"New OAuth App"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - **Application name:** GitHub User Analytics
   - **Homepage URL:** `https://your-app.vercel.app`
   - **Authorization callback URL:** `https://your-app.vercel.app/api/auth/callback`
4. –ù–∞–∂–∞—Ç—å **"Register application"**
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å **Client ID** –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å **Client Secret**

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
# .env (—Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!)
GITHUB_OAUTH_CLIENT_ID=Iv1.xxxxxxxxxxxx
GITHUB_OAUTH_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GITHUB_TOKEN=ghp_xxx  # –û—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] OAuth App —Å–æ–∑–¥–∞–Ω–æ
- [x] Client ID –∏ Secret —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ

---

#### –≠—Ç–∞–ø 1.2: Endpoint ‚Äî –ò–Ω–∏—Ü–∏–∞—Ü–∏—è OAuth (1.5 —á–∞—Å–∞)

**–§–∞–π–ª:** `api/auth/login.ts`

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ `state` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (CSRF –∑–∞—â–∏—Ç–∞)
2. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ GitHub
3. –†–µ–¥–∏—Ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ GitHub

**–ö–æ–¥:**

```typescript
import { randomBytes } from "crypto";
import type { VercelRequest, VercelResponse } from "@vercel/node";

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ state –¥–ª—è CSRF –∑–∞—â–∏—Ç—ã
function generateRandomState(): string {
  return randomBytes(32).toString("hex");
}

export default async function handler(req: VercelRequest, res: VercelResponse) {
  const clientId = process.env.GITHUB_OAUTH_CLIENT_ID;

  if (!clientId) {
    return res.status(500).json({ error: "OAuth not configured" });
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è state –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ cookie (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ callback)
  const state = generateRandomState();

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º state –≤ httpOnly cookie –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ callback
  res.setHeader(
    "Set-Cookie",
    `oauth_state=${state}; HttpOnly; Secure; SameSite=Lax; Max-Age=600; Path=/`,
  );

  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ redirect URI (—Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
  const baseUrl = process.env.VERCEL_URL
    ? `https://${process.env.VERCEL_URL}`
    : "http://localhost:3000";

  // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  const params = new URLSearchParams({
    client_id: clientId,
    redirect_uri: `${baseUrl}/api/auth/callback`,
    scope: "read:user user:email", // –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
    state, // CSRF –∑–∞—â–∏—Ç–∞
  });

  const authUrl = `https://github.com/login/oauth/authorize?${params}`;

  // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ GitHub
  res.redirect(authUrl);
}
```

**–¢–µ—Å—Ç—ã:**

```typescript
// api/auth/login.test.ts
import { describe, it, expect, vi, beforeEach } from "vitest";
import handler from "./login";

describe("OAuth Login Endpoint", () => {
  it("–¥–æ–ª–∂–µ–Ω —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ GitHub —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏", async () => {
    // Mock request/response
    const req = {} as any;
    const res = {
      redirect: vi.fn(),
      setHeader: vi.fn(),
      status: vi.fn().mockReturnThis(),
      json: vi.fn(),
    } as any;

    process.env.GITHUB_OAUTH_CLIENT_ID = "test_client_id";

    await handler(req, res);

    expect(res.setHeader).toHaveBeenCalledWith(
      "Set-Cookie",
      expect.stringContaining("oauth_state="),
    );
    expect(res.redirect).toHaveBeenCalledWith(
      expect.stringContaining("https://github.com/login/oauth/authorize"),
    );
  });

  it("–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ OAuth –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω", async () => {
    delete process.env.GITHUB_OAUTH_CLIENT_ID;

    const req = {} as any;
    const res = {
      status: vi.fn().mockReturnThis(),
      json: vi.fn(),
    } as any;

    await handler(req, res);

    expect(res.status).toHaveBeenCalledWith(500);
    expect(res.json).toHaveBeenCalledWith({ error: "OAuth not configured" });
  });
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] Endpoint —Å–æ–∑–¥–∞–Ω
- [x] State –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- [x] –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ GitHub —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

---

#### –≠—Ç–∞–ø 1.3: Endpoint ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ Callback (2.5 —á–∞—Å–∞)

**–§–∞–π–ª:** `api/auth/callback.ts`

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ `state` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (CSRF –∑–∞—â–∏—Ç–∞)
2. –û–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ access token
3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –≤ Vercel KV
5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ httpOnly cookie

**–ö–æ–¥:**

```typescript
import { kv } from "@vercel/kv";
import { randomBytes } from "crypto";
import type { VercelRequest, VercelResponse } from "@vercel/node";

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID —Å–µ—Å—Å–∏–∏
function generateSessionId(): string {
  return randomBytes(32).toString("hex");
}

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ cookie –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
function extractCookie(
  cookieHeader: string | undefined,
  name: string,
): string | null {
  if (!cookieHeader) return null;

  const cookies = cookieHeader.split(";").map((c) => c.trim());
  const cookie = cookies.find((c) => c.startsWith(`${name}=`));

  return cookie ? cookie.split("=")[1] : null;
}

export default async function handler(req: VercelRequest, res: VercelResponse) {
  const { code, state } = req.query;

  // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  if (!code || typeof code !== "string") {
    return res.redirect("/?error=no_code");
  }

  if (!state || typeof state !== "string") {
    return res.redirect("/?error=no_state");
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ state (CSRF –∑–∞—â–∏—Ç–∞)
  const savedState = extractCookie(req.headers.cookie, "oauth_state");

  if (!savedState || savedState !== state) {
    console.error("CSRF validation failed:", {
      savedState,
      receivedState: state,
    });
    return res.redirect("/?error=csrf_failed");
  }

  try {
    // –û–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ access token
    const tokenResponse = await fetch(
      "https://github.com/login/oauth/access_token",
      {
        method: "POST",
        headers: {
          Accept: "application/json",
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          client_id: process.env.GITHUB_OAUTH_CLIENT_ID,
          client_secret: process.env.GITHUB_OAUTH_CLIENT_SECRET,
          code,
        }),
      },
    );

    const tokenData = await tokenResponse.json();
    const { access_token } = tokenData;

    if (!access_token) {
      console.error("Failed to obtain access token:", tokenData);
      throw new Error("No access token received");
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
    const userResponse = await fetch("https://api.github.com/user", {
      headers: {
        Authorization: `Bearer ${access_token}`,
      },
    });

    if (!userResponse.ok) {
      throw new Error(`Failed to fetch user info: ${userResponse.statusText}`);
    }

    const user = await userResponse.json();

    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
    const sessionId = generateSessionId();
    const sessionData = {
      userId: user.id,
      login: user.login,
      avatarUrl: user.avatar_url,
      accessToken: access_token,
      createdAt: Date.now(),
    };

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –≤ Vercel KV (TTL: 30 –¥–Ω–µ–π)
    await kv.set(`session:${sessionId}`, sessionData, { ex: 86400 * 30 });

    console.log(`Session created for user: ${user.login} (ID: ${sessionId})`);

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ httpOnly cookie
    const cookieMaxAge = 86400 * 30; // 30 –¥–Ω–µ–π
    res.setHeader("Set-Cookie", [
      `session=${sessionId}; HttpOnly; Secure; SameSite=Lax; Max-Age=${cookieMaxAge}; Path=/`,
      "oauth_state=; HttpOnly; Secure; SameSite=Lax; Max-Age=0; Path=/", // –û—á–∏—Å—Ç–∫–∞ state cookie
    ]);

    // –†–µ–¥–∏—Ä–µ–∫—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    res.redirect("/?auth=success");
  } catch (error) {
    console.error("OAuth callback error:", error);
    res.redirect("/?error=auth_failed");
  }
}
```

**–¢–µ—Å—Ç—ã:**

```typescript
// api/auth/callback.test.ts
import { describe, it, expect, vi } from "vitest";
import handler from "./callback";

// Mock @vercel/kv
vi.mock("@vercel/kv", () => ({
  kv: {
    set: vi.fn(),
    get: vi.fn(),
    del: vi.fn(),
  },
}));

// Mock fetch
global.fetch = vi.fn();

describe("OAuth Callback Endpoint", () => {
  it("–¥–æ–ª–∂–µ–Ω –æ–±–º–µ–Ω—è—Ç—å –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω –∏ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é", async () => {
    const mockAccessToken = "gho_test_token";
    const mockUser = {
      id: 12345,
      login: "testuser",
      avatar_url: "https://avatars.githubusercontent.com/u/12345",
    };

    // Mock fetch responses
    (global.fetch as any)
      .mockResolvedValueOnce({
        json: async () => ({ access_token: mockAccessToken }),
      })
      .mockResolvedValueOnce({
        ok: true,
        json: async () => mockUser,
      });

    const req = {
      query: { code: "test_code", state: "test_state" },
      headers: { cookie: "oauth_state=test_state" },
    } as any;

    const res = {
      redirect: vi.fn(),
      setHeader: vi.fn(),
    } as any;

    await handler(req, res);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ç–æ–∫–µ–Ω –±—ã–ª –æ–±–º–µ–Ω—è–Ω
    expect(global.fetch).toHaveBeenCalledWith(
      "https://github.com/login/oauth/access_token",
      expect.any(Object),
    );

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –ø–æ–ª—É—á–µ–Ω
    expect(global.fetch).toHaveBeenCalledWith(
      "https://api.github.com/user",
      expect.objectContaining({
        headers: { Authorization: `Bearer ${mockAccessToken}` },
      }),
    );

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —É—Å–ø–µ—Ö
    expect(res.redirect).toHaveBeenCalledWith("/?auth=success");
  });

  it("–¥–æ–ª–∂–µ–Ω –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å –Ω–µ–≤–µ—Ä–Ω—ã–º state (CSRF)", async () => {
    const req = {
      query: { code: "test_code", state: "wrong_state" },
      headers: { cookie: "oauth_state=correct_state" },
    } as any;

    const res = {
      redirect: vi.fn(),
    } as any;

    await handler(req, res);

    expect(res.redirect).toHaveBeenCalledWith("/?error=csrf_failed");
  });
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] Endpoint —Å–æ–∑–¥–∞–Ω
- [x] CSRF –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ KV
- [x] Cookie —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

---

#### –≠—Ç–∞–ø 1.4: Endpoint ‚Äî Logout (1 —á–∞—Å)

**–§–∞–π–ª:** `api/auth/logout.ts`

**–ö–æ–¥:**

```typescript
import { kv } from "@vercel/kv";
import type { VercelRequest, VercelResponse } from "@vercel/node";

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ session cookie
function extractSessionFromCookie(
  cookieHeader: string | undefined,
): string | null {
  if (!cookieHeader) return null;

  const cookies = cookieHeader.split(";").map((c) => c.trim());
  const sessionCookie = cookies.find((c) => c.startsWith("session="));

  return sessionCookie ? sessionCookie.split("=")[1] : null;
}

export default async function handler(req: VercelRequest, res: VercelResponse) {
  const sessionId = extractSessionFromCookie(req.headers.cookie);

  if (sessionId) {
    try {
      // –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –∏–∑ KV
      await kv.del(`session:${sessionId}`);
      console.log(`Session deleted: ${sessionId}`);
    } catch (error) {
      console.error("Failed to delete session:", error);
    }
  }

  // –û—á–∏—Å—Ç–∫–∞ cookie
  res.setHeader(
    "Set-Cookie",
    "session=; HttpOnly; Secure; SameSite=Lax; Max-Age=0; Path=/",
  );

  // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é
  res.redirect("/?auth=logged_out");
}
```

**–¢–µ—Å—Ç—ã:**

```typescript
// api/auth/logout.test.ts
import { describe, it, expect, vi } from "vitest";
import { kv } from "@vercel/kv";
import handler from "./logout";

vi.mock("@vercel/kv");

describe("Logout Endpoint", () => {
  it("–¥–æ–ª–∂–µ–Ω —É–¥–∞–ª–∏—Ç—å —Å–µ—Å—Å–∏—é –∏ –æ—á–∏—Å—Ç–∏—Ç—å cookie", async () => {
    const req = {
      headers: { cookie: "session=test_session_id" },
    } as any;

    const res = {
      redirect: vi.fn(),
      setHeader: vi.fn(),
    } as any;

    await handler(req, res);

    expect(kv.del).toHaveBeenCalledWith("session:test_session_id");
    expect(res.setHeader).toHaveBeenCalledWith(
      "Set-Cookie",
      expect.stringContaining("Max-Age=0"),
    );
    expect(res.redirect).toHaveBeenCalledWith("/?auth=logged_out");
  });
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] Endpoint —Å–æ–∑–¥–∞–Ω
- [x] –°–µ—Å—Å–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ KV
- [x] Cookie –æ—á–∏—â–∞–µ—Ç—Å—è
- [x] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

---

#### –≠—Ç–∞–ø 1.5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GitHub Proxy (2 —á–∞—Å–∞)

**–§–∞–π–ª:** `api/github-proxy.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. –î–æ–±–∞–≤–∏—Ç—å —á—Ç–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –∏–∑ cookie
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
3. Fallback –Ω–∞ –¥–µ–º–æ-—Ç–æ–∫–µ–Ω –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
4. –†–∞–∑–¥–µ–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–µ–º–æ vs –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
5. –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `isDemo` –≤ –æ—Ç–≤–µ—Ç

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥:**

```typescript
import { kv } from "@vercel/kv";
import type { VercelRequest, VercelResponse } from "@vercel/node";

// –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ session ID –∏–∑ cookie
function extractSessionFromCookie(
  cookieHeader: string | undefined,
): string | null {
  if (!cookieHeader) return null;

  const cookies = cookieHeader.split(";").map((c) => c.trim());
  const sessionCookie = cookies.find((c) => c.startsWith("session="));

  return sessionCookie ? sessionCookie.split("=")[1] : null;
}

// –¢–∏–ø —Å–µ—Å—Å–∏–∏
interface Session {
  userId: number;
  login: string;
  avatarUrl: string;
  accessToken: string;
  createdAt: number;
}

export default async function handler(req: VercelRequest, res: VercelResponse) {
  if (req.method !== "POST") {
    return res.status(405).json({ error: "Method not allowed" });
  }

  // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –∏–∑ cookie
  const sessionId = extractSessionFromCookie(req.headers.cookie);

  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –¥–µ–º–æ-—Ä–µ–∂–∏–º —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
  let token = process.env.GITHUB_TOKEN;
  let isDemo = true;
  let userLogin: string | undefined;

  // –ï—Å–ª–∏ –µ—Å—Ç—å —Å–µ—Å—Å–∏—è ‚Äî –ø—ã—Ç–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–∫–µ–Ω
  if (sessionId) {
    try {
      const session = await kv.get<Session>(`session:${sessionId}`);
      if (session && session.accessToken) {
        token = session.accessToken;
        isDemo = false;
        userLogin = session.login;
        console.log(`Using authenticated token for user: ${userLogin}`);
      }
    } catch (error) {
      console.error("Failed to load session:", error);
      // Fallback –Ω–∞ –¥–µ–º–æ-—Ä–µ–∂–∏–º
    }
  }

  if (!token) {
    return res.status(500).json({ error: "No token available" });
  }

  const { query, variables, cacheKey } = req.body;

  if (!query) {
    return res.status(400).json({ error: "Query is required" });
  }

  // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –∫–µ—à–∞ (—Ä–∞–∑–Ω—ã–π –¥–ª—è –¥–µ–º–æ –∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
  const finalCacheKey = cacheKey
    ? isDemo
      ? `demo:${cacheKey}`
      : `user:${sessionId}:${cacheKey}`
    : null;

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
  if (finalCacheKey) {
    try {
      const cached = await kv.get(finalCacheKey);
      if (cached) {
        console.log(`Cache HIT: ${finalCacheKey}`);
        return res.status(200).json(cached);
      }
    } catch (error) {
      console.error("Cache read error:", error);
    }
  }

  // –ó–∞–ø—Ä–æ—Å –∫ GitHub API
  try {
    const response = await fetch("https://api.github.com/graphql", {
      method: "POST",
      headers: {
        Authorization: `Bearer ${token}`,
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ query, variables }),
    });

    if (!response.ok) {
      throw new Error(
        `GitHub API error: ${response.status} ${response.statusText}`,
      );
    }

    const data = await response.json();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏ GraphQL
    if (data.errors) {
      console.error("GraphQL errors:", data.errors);
      return res.status(400).json(data);
    }

    // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ rate limit –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
    const rateLimit = {
      remaining: parseInt(
        response.headers.get("X-RateLimit-Remaining") || "0",
        10,
      ),
      limit: parseInt(response.headers.get("X-RateLimit-Limit") || "5000", 10),
      reset: parseInt(response.headers.get("X-RateLimit-Reset") || "0", 10),
      used: parseInt(response.headers.get("X-RateLimit-Used") || "0", 10),
      isDemo, // –§–ª–∞–≥ —Ä–µ–∂–∏–º–∞
      userLogin, // –õ–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
    };

    const responseData = {
      ...data,
      rateLimit,
    };

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–µ—à
    if (finalCacheKey) {
      try {
        // –î–µ–º–æ: 30 –º–∏–Ω—É—Ç, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 10 –º–∏–Ω—É—Ç
        const ttl = isDemo ? 1800 : 600;
        await kv.set(finalCacheKey, responseData, { ex: ttl });
        console.log(
          `Cache SET: ${finalCacheKey} (TTL: ${ttl}s, Demo: ${isDemo})`,
        );
      } catch (error) {
        console.error("Cache write error:", error);
      }
    }

    return res.status(200).json(responseData);
  } catch (error) {
    console.error("GitHub proxy error:", error);
    return res.status(500).json({
      error: "Failed to fetch from GitHub",
      message: error instanceof Error ? error.message : "Unknown error",
    });
  }
}
```

**–¢–µ—Å—Ç—ã:**

```typescript
// api/github-proxy.test.ts
import { describe, it, expect, vi } from "vitest";
import { kv } from "@vercel/kv";
import handler from "./github-proxy";

vi.mock("@vercel/kv");

describe("GitHub Proxy with OAuth", () => {
  it("–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–º–æ-—Ç–æ–∫–µ–Ω –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö", async () => {
    const req = {
      method: "POST",
      body: { query: "test query" },
      headers: {},
    } as any;

    const mockFetch = vi.fn().mockResolvedValue({
      ok: true,
      json: async () => ({ data: "test" }),
      headers: new Map([
        ["X-RateLimit-Remaining", "5000"],
        ["X-RateLimit-Limit", "5000"],
      ]),
    });
    global.fetch = mockFetch;

    const res = {
      status: vi.fn().mockReturnThis(),
      json: vi.fn(),
    } as any;

    await handler(req, res);

    expect(mockFetch).toHaveBeenCalledWith(
      "https://api.github.com/graphql",
      expect.objectContaining({
        headers: expect.objectContaining({
          Authorization: expect.stringContaining(
            process.env.GITHUB_TOKEN || "",
          ),
        }),
      }),
    );
  });

  it("–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö", async () => {
    const mockSession = {
      userId: 123,
      login: "testuser",
      accessToken: "user_token_123",
      createdAt: Date.now(),
    };

    vi.mocked(kv.get).mockResolvedValue(mockSession);

    const req = {
      method: "POST",
      body: { query: "test query" },
      headers: { cookie: "session=valid_session_id" },
    } as any;

    const mockFetch = vi.fn().mockResolvedValue({
      ok: true,
      json: async () => ({ data: "test" }),
      headers: new Map([
        ["X-RateLimit-Remaining", "4999"],
        ["X-RateLimit-Limit", "5000"],
      ]),
    });
    global.fetch = mockFetch;

    const res = {
      status: vi.fn().mockReturnThis(),
      json: vi.fn(),
    } as any;

    await handler(req, res);

    expect(mockFetch).toHaveBeenCalledWith(
      "https://api.github.com/graphql",
      expect.objectContaining({
        headers: expect.objectContaining({
          Authorization: "Bearer user_token_123",
        }),
      }),
    );
  });
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] Proxy –æ–±–Ω–æ–≤–ª—ë–Ω
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ–º–æ –∏ OAuth —Ä–µ–∂–∏–º–æ–≤
- [x] –†–∞–∑–¥–µ–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –§–ª–∞–≥ `isDemo` –≤ –æ—Ç–≤–µ—Ç–µ
- [x] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### –î–µ–Ω—å 2: Frontend UI (8 —á–∞—Å–æ–≤)

#### –≠—Ç–∞–ø 2.1: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç UserMenu (2 —á–∞—Å–∞)

**–§–∞–π–ª:** `src/components/layout/UserMenu.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "Sign in" –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–≤–∞—Ç–∞—Ä –∏ –º–µ–Ω—é –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
- Dropdown –º–µ–Ω—é —Å –æ–ø—Ü–∏–µ–π "Sign out"

**–ö–æ–¥:**

```typescript
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'
import { Button } from '@/components/ui/button'
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu'
import { User, LogOut } from 'lucide-react'

export interface UserMenuProps {
  isAuthenticated: boolean
  user?: {
    login: string
    avatarUrl: string
  }
  onSignIn: () => void
  onSignOut: () => void
}

export function UserMenu({
  isAuthenticated,
  user,
  onSignIn,
  onSignOut,
}: UserMenuProps) {
  if (!isAuthenticated) {
    return (
      <Button onClick={onSignIn} variant="outline" size="sm">
        <User className="mr-2 h-4 w-4" />
        Sign in with GitHub
      </Button>
    )
  }

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" className="relative h-10 w-10 rounded-full">
          <Avatar>
            <AvatarImage src={user?.avatarUrl} alt={user?.login} />
            <AvatarFallback>{user?.login?.[0]?.toUpperCase()}</AvatarFallback>
          </Avatar>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end" className="w-56">
        <DropdownMenuLabel>
          <div className="flex flex-col space-y-1">
            <p className="text-sm font-medium leading-none">@{user?.login}</p>
            <p className="text-xs leading-none text-muted-foreground">
              Authenticated
            </p>
          </div>
        </DropdownMenuLabel>
        <DropdownMenuSeparator />
        <DropdownMenuItem onClick={onSignOut}>
          <LogOut className="mr-2 h-4 w-4" />
          Sign out
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

**Storybook:**

```typescript
// src/components/layout/UserMenu.stories.tsx
import type { Meta, StoryObj } from "@storybook/react";
import { UserMenu } from "./UserMenu";

const meta: Meta<typeof UserMenu> = {
  title: "Layout/UserMenu",
  component: UserMenu,
  parameters: {
    layout: "centered",
  },
};

export default meta;
type Story = StoryObj<typeof UserMenu>;

export const Unauthenticated: Story = {
  args: {
    isAuthenticated: false,
    onSignIn: () => console.log("Sign in clicked"),
    onSignOut: () => console.log("Sign out clicked"),
  },
};

export const Authenticated: Story = {
  args: {
    isAuthenticated: true,
    user: {
      login: "octocat",
      avatarUrl: "https://avatars.githubusercontent.com/u/583231?v=4",
    },
    onSignIn: () => console.log("Sign in clicked"),
    onSignOut: () => console.log("Sign out clicked"),
  },
};

export const LongUsername: Story = {
  args: {
    isAuthenticated: true,
    user: {
      login: "very-long-username-example",
      avatarUrl: "https://avatars.githubusercontent.com/u/583231?v=4",
    },
    onSignIn: () => console.log("Sign in clicked"),
    onSignOut: () => console.log("Sign out clicked"),
  },
};
```

**–¢–µ—Å—Ç—ã:**

```typescript
// src/components/layout/UserMenu.test.tsx
import { describe, it, expect, vi } from 'vitest'
import { render, screen } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { UserMenu } from './UserMenu'

describe('UserMenu', () => {
  it('–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É Sign in –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö', () => {
    render(
      <UserMenu
        isAuthenticated={false}
        onSignIn={vi.fn()}
        onSignOut={vi.fn()}
      />
    )

    expect(screen.getByRole('button', { name: /sign in/i })).toBeInTheDocument()
  })

  it('–≤—ã–∑—ã–≤–∞–µ—Ç onSignIn –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É', async () => {
    const onSignIn = vi.fn()
    const user = userEvent.setup()

    render(
      <UserMenu
        isAuthenticated={false}
        onSignIn={onSignIn}
        onSignOut={vi.fn()}
      />
    )

    await user.click(screen.getByRole('button', { name: /sign in/i }))
    expect(onSignIn).toHaveBeenCalledOnce()
  })

  it('–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–≤–∞—Ç–∞—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö', () => {
    render(
      <UserMenu
        isAuthenticated={true}
        user={{
          login: 'octocat',
          avatarUrl: 'https://example.com/avatar.png',
        }}
        onSignIn={vi.fn()}
        onSignOut={vi.fn()}
      />
    )

    expect(screen.getByRole('button')).toBeInTheDocument()
    expect(screen.getByRole('img')).toHaveAttribute('src', 'https://example.com/avatar.png')
  })

  it('–≤—ã–∑—ã–≤–∞–µ—Ç onSignOut –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ Sign out', async () => {
    const onSignOut = vi.fn()
    const user = userEvent.setup()

    render(
      <UserMenu
        isAuthenticated={true}
        user={{
          login: 'octocat',
          avatarUrl: 'https://example.com/avatar.png',
        }}
        onSignIn={vi.fn()}
        onSignOut={onSignOut}
      />
    )

    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
    await user.click(screen.getByRole('button'))

    // –ö–ª–∏–∫–∞–µ–º –Ω–∞ Sign out
    await user.click(screen.getByRole('menuitem', { name: /sign out/i }))

    expect(onSignOut).toHaveBeenCalledOnce()
  })
})
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω
- [x] Storybook stories –Ω–∞–ø–∏—Å–∞–Ω—ã (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
- [x] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç (4 —Ç–µ—Å—Ç–∞)
- [x] UI —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–∏–∑–∞–π–Ω—É

---

#### –≠—Ç–∞–ø 2.2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RateLimitBanner (1.5 —á–∞—Å–∞)

**–§–∞–π–ª:** `src/components/layout/RateLimitBanner.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

- –î–æ–±–∞–≤–∏—Ç—å prop `isDemo`
- –î–æ–±–∞–≤–∏—Ç—å prop `onLogoutClick`
- –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥:**

```typescript
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert'
import { Button } from '@/components/ui/button'
import { Info } from 'lucide-react'

export interface RateLimitBannerProps {
  remaining: number
  limit: number
  reset: number
  isDemo: boolean // NEW: —Ñ–ª–∞–≥ –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞
  onAuthClick?: () => void
  onLogoutClick?: () => void // NEW: callback –¥–ª—è –≤—ã—Ö–æ–¥–∞
}

export function RateLimitBanner({
  remaining,
  limit,
  reset,
  isDemo,
  onAuthClick,
  onLogoutClick,
}: RateLimitBannerProps) {
  const percentage = (remaining / limit) * 100
  const resetDate = new Date(reset * 1000)
  const timeUntilReset = Math.ceil((resetDate.getTime() - Date.now()) / 1000 / 60)

  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
  // - –í –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ –ò –æ—Å—Ç–∞—Ç–æ–∫ <10%
  // - –ò–õ–ò –≤ auth —Ä–µ–∂–∏–º–µ –ò –æ—Å—Ç–∞—Ç–æ–∫ <10% (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å–µ–≥–¥–∞)
  if (!isDemo && percentage >= 10) return null

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫
  const variant = percentage < 5 ? 'destructive' : 'default'
  const title = isDemo ? 'üìä Demo mode active' : '‚úÖ Authenticated'

  return (
    <Alert variant={variant} className="mb-4">
      <Info className="h-4 w-4" />
      <AlertTitle>{title}</AlertTitle>
      <AlertDescription className="mt-2 space-y-2">
        <p>
          <strong>{remaining}</strong> of {limit} requests remaining
          ({percentage.toFixed(1)}% left).
          {timeUntilReset > 0 && ` Resets in ${timeUntilReset} minutes.`}
        </p>

        {/* –î–µ–º–æ-—Ä–µ–∂–∏–º: –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤–æ–π—Ç–∏ */}
        {isDemo && percentage < 10 && onAuthClick && (
          <div className="flex flex-col gap-2 sm:flex-row sm:items-center">
            <p className="text-sm">
              Sign in with GitHub for your personal rate limit (5000 req/hour).
            </p>
            <Button onClick={onAuthClick} variant="outline" size="sm">
              Sign in with GitHub
            </Button>
          </div>
        )}

        {/* Auth —Ä–µ–∂–∏–º: –∫–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ */}
        {!isDemo && onLogoutClick && (
          <div className="flex items-center gap-2">
            <p className="text-sm">
              You're using your personal GitHub rate limit.
            </p>
            <Button onClick={onLogoutClick} variant="ghost" size="sm">
              Sign out
            </Button>
          </div>
        )}
      </AlertDescription>
    </Alert>
  )
}
```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ Storybook Stories:**

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
export const AuthenticatedLowLimit: Story = {
  args: {
    remaining: 250,
    limit: 5000,
    reset: Math.floor(Date.now() / 1000) + 1800,
    isDemo: false, // –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
    onAuthClick: () => console.log("Auth clicked"),
    onLogoutClick: () => console.log("Logout clicked"),
  },
};

export const DemoLowLimit: Story = {
  args: {
    remaining: 250,
    limit: 5000,
    reset: Math.floor(Date.now() / 1000) + 1800,
    isDemo: true, // –î–µ–º–æ
    onAuthClick: () => console.log("Auth clicked"),
    onLogoutClick: () => console.log("Logout clicked"),
  },
};
```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª

it('–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞ –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ', () => {
  render(
    <RateLimitBanner
      remaining={250}
      limit={5000}
      reset={Math.floor(Date.now() / 1000) + 1800}
      isDemo={true}
      onAuthClick={vi.fn()}
    />
  )

  expect(screen.getByText(/demo mode active/i)).toBeInTheDocument()
  expect(screen.getByRole('button', { name: /sign in/i })).toBeInTheDocument()
})

it('–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞ –≤ auth —Ä–µ–∂–∏–º–µ', () => {
  render(
    <RateLimitBanner
      remaining={250}
      limit={5000}
      reset={Math.floor(Date.now() / 1000) + 1800}
      isDemo={false}
      onAuthClick={vi.fn()}
      onLogoutClick={vi.fn()}
    />
  )

  expect(screen.getByText(/authenticated/i)).toBeInTheDocument()
  expect(screen.getByRole('button', { name: /sign out/i })).toBeInTheDocument()
})

it('—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ auth —Ä–µ–∂–∏–º–µ –µ—Å–ª–∏ –ª–∏–º–∏—Ç >10%', () => {
  const { container } = render(
    <RateLimitBanner
      remaining={4500}
      limit={5000}
      reset={Math.floor(Date.now() / 1000) + 1800}
      isDemo={false}
      onAuthClick={vi.fn()}
      onLogoutClick={vi.fn()}
    />
  )

  expect(container.firstChild).toBeNull()
})
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—ë–Ω
- [x] Storybook stories –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] –¢–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [x] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ä–µ–∂–∏–º–∞

---

#### –≠—Ç–∞–ø 2.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ App.tsx (2 —á–∞—Å–∞)

**–§–∞–π–ª:** `src/App.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å UserMenu
4. –û–±–Ω–æ–≤–∏—Ç—å RateLimitBanner —Å –Ω–æ–≤—ã–º–∏ props

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥:**

```typescript
import { useState, useEffect } from 'react'
import { UserMenu } from '@/components/layout/UserMenu'
import { RateLimitBanner } from '@/components/layout/RateLimitBanner'
import { AuthRequiredModal } from '@/components/layout/AuthRequiredModal'
// ... –¥—Ä—É–≥–∏–µ –∏–º–ø–æ—Ä—Ç—ã

// –¢–∏–ø –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è rate limit
interface RateLimitState {
  remaining: number
  limit: number
  reset: number
  isDemo: boolean
  userLogin?: string
}

// –¢–∏–ø –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
interface UserState {
  login: string
  avatarUrl: string
}

export function App() {
  const [userName, setUserName] = useState<string>('')

  const [rateLimit, setRateLimit] = useState<RateLimitState>({
    remaining: 5000,
    limit: 5000,
    reset: 0,
    isDemo: true,
  })

  const [user, setUser] = useState<UserState | null>(null)
  const [showAuthModal, setShowAuthModal] = useState(false)

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ auth –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–ø–æ—Å–ª–µ OAuth redirect)
  useEffect(() => {
    const params = new URLSearchParams(window.location.search)
    const authStatus = params.get('auth')
    const error = params.get('error')

    if (authStatus === 'success') {
      // TODO: –ü–æ–∫–∞–∑–∞—Ç—å toast —Å —É—Å–ø–µ—Ö–æ–º
      console.log('Authentication successful!')
      // –û—á–∏—Å—Ç–∏—Ç—å URL
      window.history.replaceState({}, '', window.location.pathname)
    } else if (error) {
      // TODO: –ü–æ–∫–∞–∑–∞—Ç—å toast —Å –æ—à–∏–±–∫–æ–π
      console.error('Authentication error:', error)
      window.history.replaceState({}, '', window.location.pathname)
    }
  }, [])

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è rate limit (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ useQueryUser)
  const handleRateLimitUpdate = (newRateLimit: RateLimitState) => {
    setRateLimit(newRateLimit)

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª –µ—Å–ª–∏ –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω
    if (newRateLimit.remaining === 0 && newRateLimit.isDemo) {
      setShowAuthModal(true)
    }
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ GitHub
  const handleGitHubAuth = () => {
    // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ OAuth endpoint
    window.location.href = '/api/auth/login'
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã—Ö–æ–¥–∞
  const handleLogout = () => {
    // –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ logout endpoint
    window.location.href = '/api/auth/logout'
  }

  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  const isAuthenticated = !rateLimit.isDemo && !!rateLimit.userLogin

  return (
    <div className="min-h-screen bg-background">
      {/* Header —Å UserMenu */}
      <header className="border-b">
        <div className="container mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <h1 className="text-3xl font-bold">GitHub User Analytics</h1>

            <UserMenu
              isAuthenticated={isAuthenticated}
              user={
                isAuthenticated
                  ? {
                      login: rateLimit.userLogin!,
                      avatarUrl: `https://github.com/${rateLimit.userLogin}.png`,
                    }
                  : undefined
              }
              onSignIn={() => setShowAuthModal(true)}
              onSignOut={handleLogout}
            />
          </div>
        </div>
      </header>

      {/* Main content */}
      <main className="container mx-auto px-4 py-8">
        {/* Rate Limit Banner */}
        <RateLimitBanner
          remaining={rateLimit.remaining}
          limit={rateLimit.limit}
          reset={rateLimit.reset}
          isDemo={rateLimit.isDemo}
          onAuthClick={() => setShowAuthModal(true)}
          onLogoutClick={handleLogout}
        />

        {/* Search Form */}
        <SearchForm onSubmit={setUserName} />

        {/* User Profile */}
        {userName && (
          <UserProfile
            userName={userName}
            onRateLimitUpdate={handleRateLimitUpdate}
          />
        )}
      </main>

      {/* Auth Required Modal */}
      <AuthRequiredModal
        open={showAuthModal}
        onOpenChange={setShowAuthModal}
        onGitHubAuth={handleGitHubAuth}
        remaining={rateLimit.remaining}
        limit={rateLimit.limit}
      />
    </div>
  )
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] App.tsx –æ–±–Ω–æ–≤–ª—ë–Ω
- [x] UserMenu –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [x] –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] State management –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

---

#### –≠—Ç–∞–ø 2.4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ useQueryUser Hook (1.5 —á–∞—Å–∞)

**–§–∞–π–ª:** `src/apollo/useQueryUser.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

- –ò–∑–≤–ª–µ–∫–∞—Ç—å `rateLimit` –∏–∑ –æ—Ç–≤–µ—Ç–∞
- –í—ã–∑—ã–≤–∞—Ç—å callback `onRateLimitUpdate`

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥:**

```typescript
// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

export interface UseQueryUserOptions {
  onRateLimitUpdate?: (rateLimit: {
    remaining: number;
    limit: number;
    reset: number;
    isDemo: boolean;
    userLogin?: string;
  }) => void;
}

export default function useQueryUser(
  login: string,
  options?: UseQueryUserOptions,
) {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –¥–ª—è dates ...

  const { data, loading, error } = useQuery(GET_USER_INFO, {
    variables,
    skip: !login,
    errorPolicy: "all",
    notifyOnNetworkStatusChange: true,
    onCompleted: (data) => {
      // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ rate limit –∏–∑ –æ—Ç–≤–µ—Ç–∞
      if (data.rateLimit && options?.onRateLimitUpdate) {
        options.onRateLimitUpdate(data.rateLimit);
      }
    },
  });

  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
}
```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π GraphQL Type:**

```typescript
// src/apollo/github-api.types.ts

// –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—Ç–∞
export interface GitHubUserInfoResponse {
  user: GitHubUser | null;
  rateLimit: {
    remaining: number;
    limit: number;
    reset: number;
    used: number;
    isDemo: boolean;
    userLogin?: string;
  };
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] Hook –æ–±–Ω–æ–≤–ª—ë–Ω
- [x] Rate limit –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ App
- [x] –¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [x] –¢–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

---

#### –≠—Ç–∞–ø 2.5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Apollo Client (1 —á–∞—Å)

**–§–∞–π–ª:** `src/apollo/ApolloAppProvider.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

- –í–∫–ª—é—á–∏—Ç—å credentials –≤ httpLink (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ cookies)

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥:**

```typescript
// ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...

const httpLink = createHttpLink({
  uri: "/api/github-proxy",
  credentials: "include", // NEW: –í–∫–ª—é—á–∏—Ç—å cookies
});

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
```

**–¢–µ—Å—Ç—ã:**

```typescript
// –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –≤ ApolloAppProvider.test.tsx

it('–¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å credentials –¥–ª—è cookies', () => {
  render(
    <ApolloAppProvider>
      <div>Test</div>
    </ApolloAppProvider>
  )

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ httpLink —Å–æ–∑–¥–∞–Ω —Å credentials: 'include'
  // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —ç—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç, –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å mock
})
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] Apollo Client –æ–±–Ω–æ–≤–ª—ë–Ω
- [x] Credentials –≤–∫–ª—é—á–µ–Ω—ã
- [x] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### –î–µ–Ω—å 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (8 —á–∞—Å–æ–≤)

#### –≠—Ç–∞–ø 3.1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (3 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OAuth flow –ª–æ–∫–∞–ª—å–Ω–æ
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–º–æ/auth –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ rate limit –ø–æ–≤–µ–¥–µ–Ω–∏—è
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ logout flow

**–¢–µ—Å—Ç-–ø–ª–∞–Ω:**

```typescript
// e2e/oauth-flow.spec.ts
import { test, expect } from "@playwright/test";

test.describe("OAuth Flow", () => {
  test("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ GitHub", async ({ page, context }) => {
    // 1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    await page.goto("http://localhost:3000");

    // 2. –ö–ª–∏–∫–Ω—É—Ç—å "Sign in with GitHub"
    await page.click("text=Sign in with GitHub");

    // 3. –û–∂–∏–¥–∞—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ GitHub
    await page.waitForURL(/github\.com\/login\/oauth\/authorize/);

    // 4. [Manual step] –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ GitHub
    // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ OAuth app

    // 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –æ–±—Ä–∞—Ç–Ω–æ —Å —É—Å–ø–µ—Ö–æ–º
    // await page.waitForURL(/\?auth=success/)

    // 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ UserMenu –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–≤–∞—Ç–∞—Ä
    // await expect(page.locator('img[alt*="avatar"]')).toBeVisible()
  });

  test("–¥–µ–º–æ-—Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –≤—Ö–æ–¥–∞", async ({ page }) => {
    await page.goto("http://localhost:3000");

    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ banner –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Demo mode"
    await expect(page.locator("text=Demo mode active")).toBeVisible();

    // –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
    await page.fill('input[type="text"]', "octocat");
    await page.click('button[type="submit"]');

    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
    await expect(page.locator("text=@octocat")).toBeVisible();
  });

  test("–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–π—Ç–∏", async ({ page, context }) => {
    // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤–æ—à—ë–ª
    // (—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–∏ –≤ beforeEach)

    await page.goto("http://localhost:3000");

    // –û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await page.click('button[aria-label="User menu"]');

    // –ö–ª–∏–∫–Ω—É—Ç—å "Sign out"
    await page.click("text=Sign out");

    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å ?auth=logged_out
    await page.waitForURL(/\?auth=logged_out/);

    // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º
    await expect(page.locator("text=Demo mode active")).toBeVisible();
  });
});
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã
- [x] OAuth flow –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- [x] –í—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±–∞–≥–∏

---

#### –≠—Ç–∞–ø 3.2: Security Audit (2 —á–∞—Å–∞)

**–ß–µ–∫-–ª–∏—Å—Ç:**

```markdown
## Security Checklist

### Secrets Protection

- [ ] Client Secret –ù–ï –≤ client bundle (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ DevTools ‚Üí Sources)
- [ ] Access tokens –ù–ï –≤ client bundle
- [ ] Access tokens –ù–ï –≤ localStorage/sessionStorage
- [ ] –¢–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ httpOnly cookies

### CSRF Protection

- [ ] State parameter –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ
- [ ] State —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ httpOnly cookie
- [ ] State –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ callback
- [ ] State —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Cookie Security

- [ ] Cookies –∏—Å–ø–æ–ª—å–∑—É—é—Ç HttpOnly flag
- [ ] Cookies –∏—Å–ø–æ–ª—å–∑—É—é—Ç Secure flag (HTTPS only)
- [ ] Cookies –∏—Å–ø–æ–ª—å–∑—É—é—Ç SameSite=Lax
- [ ] Session TTL —Ä–∞–∑—É–º–Ω—ã–π (30 –¥–Ω–µ–π)

### OAuth Scope

- [ ] –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π scope (read:user, user:email)
- [ ] –ù–ï –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è write access –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] Scope –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ UI

### Session Management

- [ ] –°–µ—Å—Å–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è server-side (Vercel KV)
- [ ] –°–µ—Å—Å–∏–∏ –∏–º–µ—é—Ç TTL (auto-expire)
- [ ] Logout —É–¥–∞–ª—è–µ—Ç —Å–µ—Å—Å–∏—é –∏–∑ KV
- [ ] Expired sessions –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è gracefully

### Rate Limit

- [ ] Demo mode fallback —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] User rate limit –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
- [ ] –ö–µ—à –Ω–µ —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É demo/user

### Error Handling

- [ ] OAuth errors –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç sensitive info
- [ ] Error messages generic –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] Detailed errors —Ç–æ–ª—å–∫–æ –≤ server logs
```

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –Ω–µ –≤ bundle
npm run build
grep -r "ghp_" dist/  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cookies –≤ DevTools
# Application ‚Üí Cookies ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HttpOnly, Secure, SameSite

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTTPS –≤ production
# Security ‚Üí View certificate ‚Üí Valid

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å headers
curl -I https://your-app.vercel.app
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: Strict-Transport-Security, X-Content-Type-Options
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] –í—Å–µ –ø—É–Ω–∫—Ç—ã —á–µ–∫-–ª–∏—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [x] –ù–∞–π–¥–µ–Ω–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] Security report —Å–æ–∑–¥–∞–Ω

---

#### –≠—Ç–∞–ø 3.3: Production Testing (2 —á–∞—Å–∞)

**–ó–∞–¥–∞—á–∏:**

1. Deploy –Ω–∞ Vercel staging
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

**–ü—Ä–æ—Ü–µ–¥—É—Ä–∞:**

```bash
# 1. Deploy –Ω–∞ staging
vercel --prod

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Vercel Dashboard
# Settings ‚Üí Environment Variables:
# - GITHUB_TOKEN (demo mode)
# - GITHUB_OAUTH_CLIENT_ID
# - GITHUB_OAUTH_CLIENT_SECRET
# - KV_URL (auto from Vercel KV)
# - KV_REST_API_URL (auto from Vercel KV)
# - KV_REST_API_TOKEN (auto from Vercel KV)
# - KV_REST_API_READ_ONLY_TOKEN (auto from Vercel KV)

# 3. Redeploy –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
vercel --prod

# 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
vercel logs --follow
```

**–¢–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ production:**

1. **Demo Mode:**
   - –û—Ç–∫—Ä—ã—Ç—å app –±–µ–∑ –≤—Ö–æ–¥–∞
   - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ª–∏–º–∏—Ç –æ–±—â–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cache (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –±—ã—Å—Ç—Ä–µ–µ)

2. **OAuth Flow:**
   - –ö–ª–∏–∫–Ω—É—Ç—å "Sign in with GitHub"
   - –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ GitHub
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –æ–±—Ä–∞—Ç–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∞–≤–∞—Ç–∞—Ä –ø–æ—è–≤–∏–ª—Å—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ rate limit –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π

3. **Rate Limit:**
   - –°–¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—á—ë—Ç—á–∏–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ <10%
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–∞–ª –ø—Ä–∏ 0

4. **Logout:**
   - –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç –≤ demo mode
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Å—Å–∏—è —É–¥–∞–ª–µ–Ω–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] Deploy —É—Å–ø–µ—à–µ–Ω
- [x] –í—Å–µ —Ç–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ–π–¥–µ–Ω—ã –≤ production
- [x] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ –æ—à–∏–±–∫–∏
- [x] Performance acceptable

---

#### –≠—Ç–∞–ø 3.4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (1 —á–∞—Å)

**–§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

1. **CLAUDE.md:**

````markdown
## OAuth Integration (Phase 7)

### Architecture

**Demo Mode (default):**

- Uses server-side token (`GITHUB_TOKEN`)
- Shared rate limit (5000 req/hour)
- No authentication required

**OAuth Mode (optional):**

- User signs in with GitHub OAuth
- Personal rate limit (5000 req/hour per user)
- Stored in Vercel KV (30-day session TTL)

### Endpoints

- `GET /api/auth/login` - Initiate OAuth flow
- `GET /api/auth/callback` - Handle GitHub callback
- `GET /api/auth/logout` - Clear session

### Environment Variables

```bash
# Required for OAuth
GITHUB_OAUTH_CLIENT_ID=Iv1.xxx
GITHUB_OAUTH_CLIENT_SECRET=xxx

# Required for demo mode
GITHUB_TOKEN=ghp_xxx

# Auto-configured by Vercel KV
KV_URL=...
KV_REST_API_URL=...
KV_REST_API_TOKEN=...
```
````

### User Experience

Users can use the app immediately in demo mode. When rate limit runs low (<10%), they're prompted to sign in for a personal rate limit. This "try before you auth" approach reduces friction and increases conversion.

````

2. **README.md:**
```markdown
## Authentication

GitHub User Analytics works in two modes:

### Demo Mode (No Sign-in Required)
- Shared rate limit (5000 requests/hour)
- Full functionality
- No registration needed

### Authenticated Mode (Sign in with GitHub)
- Personal rate limit (5000 requests/hour)
- Your own cache
- Future features: save favorites, compare users

Click "Sign in with GitHub" when prompted to upgrade.
````

3. **PHASE_7_COMPLETION_SUMMARY.md:**

```markdown
# Phase 7: OAuth Integration - Completion Summary

## ‚úÖ Completed

### Backend (Day 1)

- [x] GitHub OAuth App configured
- [x] `/api/auth/login` endpoint (CSRF protection)
- [x] `/api/auth/callback` endpoint (session management)
- [x] `/api/auth/logout` endpoint
- [x] Updated `api/github-proxy.ts` for user tokens
- [x] Session storage in Vercel KV (30-day TTL)

### Frontend (Day 2)

- [x] `UserMenu` component (avatar, dropdown)
- [x] Updated `RateLimitBanner` (isDemo support)
- [x] Updated `App.tsx` (auth state management)
- [x] Updated `useQueryUser` (rate limit callback)
- [x] Storybook stories for all components
- [x] Tests for all components (100% coverage)

### Testing (Day 3)

- [x] Integration tests (OAuth flow)
- [x] Security audit (passed all checks)
- [x] Production testing (all scenarios passed)
- [x] Documentation updated

## üìä Metrics

- **Code Coverage:** 95%+
- **Security Score:** A+ (no vulnerabilities)
- **Performance:** OAuth flow <3s
- **UX:** Seamless demo ‚Üí auth transition

## üöÄ Deployment

- **Environment:** Production (Vercel)
- **Status:** ‚úÖ Live
- **URL:** https://your-app.vercel.app

## üìù Known Issues

None

## üîú Future Enhancements

- Phase 8: User profiles (save favorites)
- Phase 9: Private repository access
- Phase 10: Admin dashboard

## üìö Resources

- [OAuth Documentation](./OAUTH_GUIDE.md)
- [Security Checklist](./SECURITY_CHECKLIST.md)
- [Troubleshooting](./OAUTH_TROUBLESHOOTING.md)
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

- [x] –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [x] README –ø–æ–Ω—è—Ç–µ–Ω –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- [x] Troubleshooting guide —Å–æ–∑–¥–∞–Ω
- [x] Completion summary –Ω–∞–ø–∏—Å–∞–Ω

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit Tests

**Backend:**

- [ ] `api/auth/login.test.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ OAuth URL, state generation
- [ ] `api/auth/callback.test.ts` ‚Äî CSRF protection, token exchange, session creation
- [ ] `api/auth/logout.test.ts` ‚Äî session deletion, cookie clearing
- [ ] `api/github-proxy.test.ts` ‚Äî demo vs auth mode, token selection

**Frontend:**

- [ ] `UserMenu.test.tsx` ‚Äî rendering, click handlers
- [ ] `RateLimitBanner.test.tsx` ‚Äî isDemo flag, conditional rendering
- [ ] `App.test.tsx` ‚Äî auth state management, URL param handling

### Integration Tests

**Playwright E2E:**

- [ ] OAuth flow (login ‚Üí callback ‚Üí authenticated state)
- [ ] Demo mode (search without auth)
- [ ] Rate limit behavior (demo vs auth)
- [ ] Logout flow (auth ‚Üí demo)

### Manual Testing Checklist

**–õ–æ–∫–∞–ª—å–Ω–æ (vercel dev):**

- [ ] OAuth login —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Callback –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (refresh —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- [ ] Rate limit –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º
- [ ] Logout –æ—á–∏—â–∞–µ—Ç —Å–µ—Å—Å–∏—é
- [ ] Demo fallback —Ä–∞–±–æ—Ç–∞–µ—Ç

**Production (vercel.app):**

- [ ] OAuth flow —Ä–∞–±–æ—Ç–∞–µ—Ç —Å https
- [ ] Cookies —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] KV storage —Ä–∞–±–æ—Ç–∞–µ—Ç (session persistence)
- [ ] Rate limit —Ä–∞–∑–¥–µ–ª—ë–Ω –º–µ–∂–¥—É demo/auth
- [ ] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

- [x] **OAuth Flow:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ GitHub OAuth
- [x] **Personal Rate Limit:** –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç 5000 req/hour
- [x] **Demo Mode:** –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ demo
- [x] **Session Persistence:** –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –≤–∏–∑–∏—Ç–∞–º–∏
- [x] **Logout:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—ã–π—Ç–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ demo

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [x] **No Secrets in Client:** Client Secret –∏ —Ç–æ–∫–µ–Ω—ã –Ω–µ –≤ bundle
- [x] **HttpOnly Cookies:** –°–µ—Å—Å–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç XSS
- [x] **CSRF Protection:** State parameter –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ callback
- [x] **Minimal Scope:** OAuth –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ `read:user`
- [x] **Server-side Tokens:** –í—Å–µ —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è server-side

### UX/UI

- [x] **Try Before Auth:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–æ –≤—Ö–æ–¥–∞
- [x] **Clear Auth Status:** –ò–Ω–¥–∏–∫–∞—Ü–∏—è demo vs authenticated
- [x] **Seamless Transition:** –ü–µ—Ä–µ—Ö–æ–¥ demo ‚Üí auth –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π
- [x] **Helpful Prompts:** –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∫–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –≤–æ–π—Ç–∏

### Performance

- [x] **Fast OAuth:** Flow –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∑–∞ <3 —Å–µ–∫—É–Ω–¥
- [x] **Low Latency:** Session lookup –¥–æ–±–∞–≤–ª—è–µ—Ç <50ms
- [x] **Efficient Caching:** –†–∞–∑–¥–µ–ª—å–Ω—ã–π –∫–µ—à –¥–ª—è demo/user
- [x] **No Degradation:** Performance –Ω–µ —É—Ö—É–¥—à–∞–µ—Ç—Å—è —Å OAuth

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [x] **Unit Tests:** 95%+ coverage
- [x] **Integration Tests:** –í—Å–µ OAuth —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã
- [x] **Security Audit:** Passed all checks
- [x] **Production Tested:** Works in real environment

---

## üîÑ –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

### –ï—Å–ª–∏ OAuth –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production:

**–®–∞–≥ 1: –ë—ã—Å—Ç—Ä–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)**

```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å OAuth endpoints
mv api/auth api/auth.disabled
vercel --prod
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ demo mode. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è.

**–®–∞–≥ 2: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (30 –º–∏–Ω—É—Ç)**

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Vercel Functions
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Vercel KV connectivity
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GitHub OAuth App settings

**–®–∞–≥ 3: –ü–æ—á–∏–Ω–∫–∞ offline (1-2 —á–∞—Å–∞)**

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º `vercel dev`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ staging

**–®–∞–≥ 4: Re-deploy (5 –º–∏–Ω—É—Ç)**

```bash
# –í–µ—Ä–Ω—É—Ç—å OAuth endpoints
mv api/auth.disabled api/auth
vercel --prod
```

**–®–∞–≥ 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (24 —á–∞—Å–∞)**

- –°–ª–µ–¥–∏—Ç—å –∑–∞ –æ—à–∏–±–∫–∞–º–∏ –≤ –ª–æ–≥–∞—Ö
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —É—Å–ø–µ—à–Ω–æ—Å—Ç—å OAuth flow
- –°–æ–±–∏—Ä–∞—Ç—å feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ñ–æ–ª–±—ç–∫ –≤—Å—Ç—Ä–æ–µ–Ω –≤ –∫–æ–¥:**

- Demo mode **–≤—Å–µ–≥–¥–∞** –¥–æ—Å—Ç—É–ø–µ–Ω
- OAuth ‚Äî —ç—Ç–æ enhancement, –Ω–µ requirement
- –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è expired ‚Üí automatic fallback to demo
- –ï—Å–ª–∏ KV –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí automatic fallback to demo

**–ù–µ—Ç —Ä–∏—Å–∫–∞ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫–∞–∑–∞ —Å–µ—Ä–≤–∏—Å–∞!**

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: KV Storage –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (Vercel SLA 99.9%)
**–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ (OAuth –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, demo —Ä–∞–±–æ—Ç–∞–µ—Ç)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**

- Graceful degradation –Ω–∞ demo mode
- Error handling –≤ session lookup
- Retry logic –¥–ª—è KV operations
- Monitoring –∏ alerts –Ω–∞ KV errors

---

### –†–∏—Å–∫ 2: GitHub OAuth Rate Limit

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (–ø—Ä–∏ –±–æ–ª—å—à–æ–º —Ç—Ä–∞—Ñ–∏–∫–µ)
**–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–æ–µ (–Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**

- Monitor OAuth endpoint usage
- Implement backoff –¥–ª—è failed attempts
- Cache OAuth responses –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- Documentation –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (wait and retry)

---

### –†–∏—Å–∫ 3: Session Hijacking

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (—Å HttpOnly cookies)
**–í–ª–∏—è–Ω–∏–µ:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ (access –∫ user account)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**

- HttpOnly cookies (–∑–∞—â–∏—Ç–∞ –æ—Ç XSS)
- Secure flag (HTTPS only)
- SameSite=Lax (–∑–∞—â–∏—Ç–∞ –æ—Ç CSRF)
- Short session TTL (30 –¥–Ω–µ–π, –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å)
- Session rotation (optional enhancement)

---

### –†–∏—Å–∫ 4: OAuth Callback Vulnerability

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è (–µ—Å–ª–∏ state –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è)
**–í–ª–∏—è–Ω–∏–µ:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ (CSRF attack)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**

- ‚úÖ State parameter generation (crypto.randomBytes)
- ‚úÖ State validation –≤ callback
- ‚úÖ State stored –≤ httpOnly cookie
- ‚úÖ State cleared –ø–æ—Å–ª–µ use
- Security audit –ø–µ—Ä–µ–¥ production

---

### –†–∏—Å–∫ 5: Secrets Exposure

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–µ—Å–ª–∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å best practices)
**–í–ª–∏—è–Ω–∏–µ:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ (GitHub token compromise)

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**

- ‚úÖ –í—Å–µ secrets server-side only
- ‚úÖ Never in client bundle
- ‚úÖ Not in git (.env.local in .gitignore)
- ‚úÖ Vercel environment variables (encrypted)
- Regular secret rotation

---

## üìä Timeline Summary

| Day       | Hours   | Phase      | Deliverables                                                |
| --------- | ------- | ---------- | ----------------------------------------------------------- |
| **Day 1** | 8h      | Backend    | OAuth endpoints, session management, proxy update           |
| **Day 2** | 8h      | Frontend   | UserMenu, RateLimitBanner, App.tsx, Storybook, tests        |
| **Day 3** | 8h      | Testing    | Integration tests, security audit, production testing, docs |
| **TOTAL** | **24h** | **3 days** | Fully functional OAuth integration                          |

---

## üéì Lessons Learned

### –ß—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ —Ö–æ—Ä–æ—à–æ

1. **Try Before Auth —Å—Ç—Ä–∞—Ç–µ–≥–∏—è** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. **Graceful degradation** ‚Äî demo mode –∫–∞–∫ fallback –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç reliability
3. **HttpOnly cookies** ‚Äî –ø—Ä–æ—Å—Ç–æ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è session management
4. **Vercel KV** ‚Äî –±—ã—Å—Ç—Ä–æ–µ –∏ —É–¥–æ–±–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Å–µ—Å—Å–∏–π

### –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

1. **Session refresh** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–¥ expiry
2. **Rate limit pooling** ‚Äî sharing limits –º–µ–∂–¥—É demo users –±–æ–ª–µ–µ —É–º–Ω–æ
3. **Analytics** ‚Äî tracking conversion rate demo ‚Üí auth
4. **A/B testing** ‚Äî —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–∏–∑—ã–≤–∞ –∫ –¥–µ–π—Å—Ç–≤–∏—é

---

## üìö –†–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [GitHub OAuth Guide](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps)
- [OAuth 2.0 RFC](https://datatracker.ietf.org/doc/html/rfc6749)
- [Vercel Functions](https://vercel.com/docs/functions)
- [Vercel KV](https://vercel.com/docs/storage/vercel-kv)
- [OWASP OAuth Security](https://cheatsheetseries.owasp.org/cheatsheets/OAuth2_Cheat_Sheet.html)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- [OAuth Debugger](https://oauthdebugger.com/)
- [JWT Decoder](https://jwt.io/)
- [Postman](https://www.postman.com/) ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- [Vercel CLI](https://vercel.com/docs/cli) ‚Äî –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

- [Vercel OAuth Example](https://github.com/vercel/examples/tree/main/solutions/oauth)
- [Next.js Auth Examples](https://github.com/nextauthjs/next-auth)

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§–∞–∑–∞ 7 –¥–æ–±–∞–≤–ª—è–µ—Ç OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ —É—â–µ—Ä–±–∞ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –°—Ç—Ä–∞—Ç–µ–≥–∏—è "–ø–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º" –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø–æ–≤—ã—à–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—é –∏ —Å–Ω–∏–∂–∞—è –æ—Ç–∫–∞–∑—ã.

–≠—Ç–∞ —Ñ–∞–∑–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–∞ –¥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ demo mode –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π –∏–ª–∏ –∫–æ–≥–¥–∞ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!** üöÄ

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-18
**–°—Ç–∞—Ç—É—Å:** Ready for Implementation
**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:** –ü—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Day 1, –ª–∏–±–æ –æ—Ç–ª–æ–∂–∏—Ç—å —Ñ–∞–∑—É –¥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
